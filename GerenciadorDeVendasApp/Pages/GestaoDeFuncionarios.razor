@page "/GestaoDeFuncionarios"
@using Syncfusion.Blazor.Grids
@using Syncfusion.Blazor
@using Syncfusion.Blazor.Data

<h3>Gestao De Funcionarios</h3>

<div style="max-width:900px">
    @*<span class="error">@ErrorDetails</span>*@

    @* AllowFiltering="true" -> Filtra por todas as colunas*@
    <SfGrid DataSource="gestaoFunc" AllowPaging="true" AllowFiltering="true" Toolbar="@toolbar" AllowSorting="true" AllowGrouping="true">
      <GridEditSettings AllowAdding="true" AllowEditing="true" AllowDeleting="true"></GridEditSettings>
      @* <GridEvents TValue="GestaoFuncionarioModel" OnActionFailure="@ActionFailure"></GridEvents>
        <SfDataManager Url="https://some.com/invalidUrl" Adaptor="Adaptors.WebApiAdaptor"></SfDataManager>*@
        <GridPageSettings PageSize="20"></GridPageSettings>
        <GridFilterSettings Type="Syncfusion.Blazor.Grids.FilterType.Menu"></GridFilterSettings>
        <GridColumns>
            <GridColumn IsPrimaryKey="true" Field="@nameof(GestaoFuncionarioModel.Id)" Width="50px"></GridColumn>
            <GridColumn HeaderText="Primeiro Nome" Field="@nameof(GestaoFuncionarioModel.FirstName)"></GridColumn>
            <GridColumn HeaderText="Segundo Nome" Field="@nameof(GestaoFuncionarioModel.LastName)"></GridColumn>
            <GridColumn HeaderText="Equipe" Field="@nameof(GestaoFuncionarioModel.JobTitle)"></GridColumn>
            <GridColumn HeaderText="Sexo" Field="@nameof(GestaoFuncionarioModel.Gender)" Width="100px"></GridColumn>
            <GridColumn HeaderText="Dt Nasc." Field="@nameof(GestaoFuncionarioModel.DateOfBirth)" Format="d"></GridColumn>
            <GridColumn HeaderText="EquipeId" Field="@nameof(GestaoFuncionarioModel.ReportToEmpId)" Width="100px"></GridColumn>
        </GridColumns>
    </SfGrid>
</div>

@*<style>
    .error {
        color: red;
    }
</style>*@
@code {
    private List<GestaoFuncionarioModel>? gestaoFunc = null;
    //public string ErrorDetails = "";

    private List<object> toolbar = new List<object> { "Add", "Edit", "Update", "Delete", "Cancel","Search" };
    //gestaoFunc = employeeData
    //GestaoFuncionarioModel = EmployeeModel

    protected override void OnInitialized()
    {
        //SM
        GestaoFuncionarioModel emp1 = new GestaoFuncionarioModel
            {
                Id = 1,
                FirstName = "Bob",
                LastName = "Jones",
                JobTitle = "SM",
                Gender = "Male",
                DateOfBirth = DateTime.Parse("10 Jan 1974"),
                ReportToEmpId = null

            };
        //TL
        GestaoFuncionarioModel emp2 = new GestaoFuncionarioModel
            {
                Id = 2,
                FirstName = "Jenny",
                LastName = "Marks",
                JobTitle = "TL",
                Gender = "Female",
                DateOfBirth = DateTime.Parse("6 May 1976"),
                ReportToEmpId = 1

            };
        GestaoFuncionarioModel emp3 = new GestaoFuncionarioModel
            {
                Id = 3,
                FirstName = "Henry",
                LastName = "Andrews",
                JobTitle = "TL",
                Gender = "Male",
                DateOfBirth = DateTime.Parse("6 May 1981"),
                ReportToEmpId = 1

            };
        GestaoFuncionarioModel emp4 = new GestaoFuncionarioModel
            {
                Id = 4,
                FirstName = "John",
                LastName = "Jameson",
                JobTitle = "TL",
                Gender = "Male",
                DateOfBirth = DateTime.Parse("17 Apr 1984"),
                ReportToEmpId = 1

            };

        //SR
        //Team - Jenny Marks
        GestaoFuncionarioModel emp5 = new GestaoFuncionarioModel
            {
                Id = 5,
                FirstName = "Noah",
                LastName = "Robinson",
                JobTitle = "SR",
                Gender = "Male",
                DateOfBirth = DateTime.Parse("12 Feb 1993"),
                ReportToEmpId = 2

            };
        GestaoFuncionarioModel emp6 = new GestaoFuncionarioModel
            {
                Id = 6,
                FirstName = "Elijah",
                LastName = "Hamilton",
                JobTitle = "SR",
                Gender = "Male",
                DateOfBirth = DateTime.Parse("17 Jun 1993"),
                ReportToEmpId = 2

            };
        GestaoFuncionarioModel emp7 = new GestaoFuncionarioModel
            {
                Id = 7,
                FirstName = "Jamie",
                LastName = "Fisher",
                JobTitle = "SR",
                Gender = "Male",
                DateOfBirth = DateTime.Parse("13 Jul 1992"),
                ReportToEmpId = 2

            };
        //SR
        //Team - Henry Andrews
        GestaoFuncionarioModel emp8 = new GestaoFuncionarioModel
            {
                Id = 8,
                FirstName = "Olivia",
                LastName = "Mills",
                JobTitle = "SR",
                Gender = "Female",
                DateOfBirth = DateTime.Parse("17 Apr 1990"),
                ReportToEmpId = 3

            };
        GestaoFuncionarioModel emp9 = new GestaoFuncionarioModel
            {
                Id = 9,
                FirstName = "Benjamin",
                LastName = "Lucas",
                JobTitle = "SR",
                Gender = "Male",
                DateOfBirth = DateTime.Parse("12 Feb 1993"),
                ReportToEmpId = 3

            };

        GestaoFuncionarioModel emp10 = new GestaoFuncionarioModel
            {
                Id = 10,
                FirstName = "Sarah",
                LastName = "Henderson",
                JobTitle = "SR",
                Gender = "Female",
                DateOfBirth = DateTime.Parse("12 Aug 1993"),
                ReportToEmpId = 3

            };
        //SR
        //John Jameson
        GestaoFuncionarioModel emp11 = new GestaoFuncionarioModel
            {
                Id = 11,
                FirstName = "Emma",
                LastName = "Lee",
                JobTitle = "SR",
                Gender = "Female",
                DateOfBirth = DateTime.Parse("12 Nov 1995"),
                ReportToEmpId = 4

            };
        GestaoFuncionarioModel emp12 = new GestaoFuncionarioModel
            {
                Id = 12,
                FirstName = "Ava",
                LastName = "Williams",
                JobTitle = "SR",
                Gender = "Female",
                DateOfBirth = DateTime.Parse("15 May 1998"),
                ReportToEmpId = 4

            };
        GestaoFuncionarioModel emp13 = new GestaoFuncionarioModel
            {
                Id = 13,
                FirstName = "Angela",
                LastName = "Moore",
                JobTitle = "SR",
                Gender = "Female",
                DateOfBirth = DateTime.Parse("06 Jul 1994"),
                ReportToEmpId = 4

            };


        gestaoFunc = new List<GestaoFuncionarioModel> { emp1, emp2, emp3, emp4, emp5, emp6, emp7, emp8, emp9, emp10, emp11, emp12, emp13 };
    }

    public class GestaoFuncionarioModel
    {
        public int Id { get; set; }
        public string? FirstName { get; set; }
        public string? LastName { get; set; }
        public string? JobTitle { get; set; }
        public string? Gender { get; set; }
        public DateTime DateOfBirth { get; set; }
        public int? ReportToEmpId { get; set; }
    }

    //public void ActionFailure(FailureEventArgs args)
    //{
    //    this.ErrorDetails = "Server exception: 404 Not found";
    //    StateHasChanged();
    //}
}
